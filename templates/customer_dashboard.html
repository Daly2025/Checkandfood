<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Reserva de Restaurante</title>
    <style>
        body {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            height: 100vh;
            margin: 0;
            font-family: Arial, sans-serif;
        }
        #campos-reserva {
            display: none; /* Los inputs están ocultos por defecto */
            margin-top: 20px;
        }
        label, select, input, button {
            margin: 10px 0;
            font-size: 16px;
        }
    </style>
    <script>
        function mostrarCamposReserva() {
            // Muestra los campos adicionales cuando se selecciona un restaurante
            const select = document.getElementById("restaurantes");
            const campos = document.getElementById("campos-reserva");
            if (select.value) {
                campos.style.display = "block"; // Mostrar los campos
            } else {
                campos.style.display = "none"; // Ocultarlos si no hay selección
            }
        }
    </script>
</head>
<body>
    <h1>Reserva tu Restaurante</h1>
    <h2>ususario: {{nombreCliente}}</h2>
    <form action="elegido" method="POST">
        <label for="restaurantes">Selecciona un Restaurante:</label>
        <select id="restaurantes" name="restaurante" onchange="mostrarCamposReserva()" required>
        
            <!-- Opción predeterminada vacía -->
            <option value="" disabled selected>Seleccione un restaurante</option>
            <!-- Opciones dinámicas -->
            {% for restaurante in restaurantes %}
                <option value="{{ restaurante.restaurant_id }}">{{ restaurante.name }}</option>
            {% endfor %}
        </select>
 



        <!-- Campos adicionales: fecha y número de comensales -->
        <div id="campos-reserva">
            <label for="fecha">Fecha de la Reserva:</label>
            <input type="date" id="fecha" name="fecha" required>

            <label for="comensales">Número de Comensales:</label>
            <input type="number" id="comensales" name="comensales" min="1" required>
        </div>
            <input type="number" id="cliente" name="id_cliente" value="1" readonly>

        <button type="submit">Confirmar Reserva</button>

        <h2>{{ mensaje | safe }}</h2>

    </form>

<hr>

<label for="clientes">CLIENTES:</label>
<select id="c" name="ccc" required>

    <!-- Opción predeterminada vacía -->
    <option value="" disabled selected>Seleccione un CLIENTE</option>
    <!-- Opciones dinámicas -->
    {% for a in clientes %}
        <option value="{{ a.customer_id }}">{{ a.name }}</option>
    {% endfor %}
</select>



<section class="contenedorPrincipal">
    <h3>Listado tareas del usuario con ID {{nombreCliente}} </h3>

    <div class="lista">
        <table id="tablaIncidencias">
            <thead>
                <th>fecha</th>
                <th>Restaurant</th>
                <th>estado</th>
                <th>numero de comensales</th>
                <th>Operaciones</th>
            </thead>
            <tbody id="tbodyTareas">

                <?php
                while ($row = $result->fetch()) {
                    if ($row['estado'] == null) 
                        {$estado = 'Terminado';} else {$estado = 'En proceso';}
                    echo "<tr>                            
                    <td>" . 
                        $row['fecha_creacion'] .
                    "</td>
                    <td>" . 
                        $row['titulo'] .
                    "</td>" . 
                    "<td>". 
                        $estado .
                    "</td>" . 
                    "<td>". 
                        $row['tareas_id'] .
                    "</td>" .
                    "<td> 
                        <a href='tarea_ver.php?tarea_id="
                            . $row['tareas_id']."'>ver</a> 
                        | 
                        <a href='tarea_editar.php?tarea_id="
                            . $row['tareas_id']."'>editar</a>
                        | 
                        <a href='tarea_borrar.php?tarea_id="
                            . $row['tareas_id']."'>eliminar</a>
                    </td>
                    </tr>";

                }
                ?>
                
            </tbody>

        </table>
    </div>
</section>

<!---->

</body>
</html>